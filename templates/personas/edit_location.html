{% extends "personas/base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}
{% load thumbnail %}
{% block title %}
    <header>
        <h1>Edit Location {{ location.name }}</h1>
    </header>
{% endblock %}

{% block content %}

{% block content_l %}
<div class="col-md-1 col-sm-1 col-lg-1" id="col1">
    </div>
{% endblock %}
{% block column1 %}
<div class="col-md-5 col-sm-5 col-lg-5" id="col1">
    {% crispy form %}
</div>
{% endblock %}

{% block column2 %}
<div class="col-md-5 col-sm-5 col-lg-5" id="col1">
        <div class="img-responsive">
            {% thumbnail location.image "175" crop="center" as im %}
            <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">{% empty %}
            <img src="{% static '/images/shadow_figure.jpg' %}" alt="">
        {% endthumbnail %}
        <p>
            Created by {{ location.creator }}
        </p>
        <hr>
 <a href="{% url 'delete_location' pk=location.pk %}" class="btn btn-danger">Delete Location</a>

 <hr>
 <h3>Map</h3>

 <div id="map" style="width: 500px; height: 400px"></div>
        
        <script type="text/javascript">
        var map = L.map('map').setView([{{ location.latitude|floatformat:6 }}, {{ location.longitude|floatformat:6 }}], 6);

        L.tileLayer("{{ story.map_tile }}", {
            maxZoom: 13,
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            id: 'examples.map-i875mjb7'
        }).addTo(map);


        L.marker([{{ location.latitude|floatformat:6 }}, {{ location.longitude|floatformat:6 }}], 6).addTo(map)
        .bindPopup( "{{location.name}}" ).openPopup();

        var popup = L.popup();

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }

        map.on('click', onMapClick);
        </script>
</div>
{% endblock %}


{% block content_r %}
<div class="col-md-1 col-sm-1 col-lg-1">
    </div>
{% endblock %}

{% endblock %}