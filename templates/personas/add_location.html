{% extends "personas/base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block title %}
<header>
    <h1>Add Location to "{{ story.title }}"</h1>
</header>
{% endblock %}

{% block content %}
{% block l_content %}
    <div class="col-md-1 col-sm-1 col-lg-1">
    </div>
{% endblock %}

{% block column1 %}
    <div class="col-md-5 col-sm-5 col-lg-5" id="col1">
    <h3>Adding a Location</h3>
    <p>Locations are the places where the action and drama in your story occurs.  It can be a mansion, a room, a geographic location or anyplace else that's appropriate to your chronicle.</p>

    <div id="map" style="width: 500px; height: 400px"></div>
        
        <script type="text/javascript">
        var map = L.map('map').setView([{{ mainmap.base_latitude|floatformat:6 }}, {{ mainmap.base_longitude|floatformat:6 }}], 6);

        L.tileLayer("{{ story.map_tile }}", {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            id: 'examples.map-i875mjb7'
        }).addTo(map);

        var popup = L.popup();

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(map);
        }

        map.on('click', onMapClick);
        </script>

    </div>
{% endblock %}

{% block column2 %}
    <div class="col-md-5 col-sm-5 col-lg-5" id="col1">
    <h3>Add a Location</h3>
    {% crispy location_form %}
    <br><br><br>
    </div>
{% endblock %}

{% block r_content %}
<div class="col-md-1 col-sm-1 col-lg-1">
</div>
{% endblock %}

{% endblock %}